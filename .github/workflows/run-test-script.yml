name: Test

# Questo evento permette l'esecuzione manuale dalla tab "Actions"
on:
  workflow_dispatch:
    inputs:
      ticker_list:
        description: 'Lista ticker separati da virgola (opzionale, default nel codice)'
        required: false
        default: ''

jobs:
  run-prediction:
    runs-on: ubuntu-latest

    steps:
    # 1. Scarica il codice del repository
    - name: Checkout repository
      uses: actions/checkout@v3

    # 2. Installa Python
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'

    # 3. Installa le dipendenze necessarie
    # (Se hai un requirements.txt Ã¨ meglio usare quello, altrimenti installiamo al volo)
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install pandas numpy yfinance requests beautifulsoup4 lxml nltk

    # 4. Esegue lo script Python
    # Assicurati che il nome del file qui sotto corrisponda al tuo file reale!
    - name: Run Prediction Script
      env:
        TICKER_INPUT: ${{ github.event.inputs.ticker_list }}
      run: python scripts/test.py

